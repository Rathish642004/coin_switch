{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <h1>Coinswitch Dashboard</h1>
            <div class="user-info">
                <span class="username">Welcome, User</span>
                <button class="refresh-btn" onclick="getBalance()">
                    <i class="fas fa-sync-alt"></i> Refresh Balance
                </button>
            </div>
        </header>

        <div class="dashboard-grid">
            

            <div class="actions-section">
                <div class="action-cards">
                    <div class="action-card" onclick="showForm('withdrawalForm')">
                        <i class="fas fa-arrow-right"></i>
                        <h3>Withdraw</h3>
                        <p>Withdraw your cryptocurrencies</p>
                    </div>
                    <div class="action-card" onclick="showForm('orderForm')">
                        <i class="fas fa-exchange-alt"></i>
                        <h3>Place Order</h3>
                        <p>Create a new trading order</p>
                    </div>
                    <div class="action-card" onclick="showForm('cancelOrderForm')">
                        <i class="fas fa-times-circle"></i>
                        <h3>Cancel Order</h3>
                        <p>Cancel an existing order</p>
                    </div>
                    <div class="action-card" onclick="showOrdersSection()">
                        <i class="fas fa-history"></i>
                        <h3>Order History</h3>
                        <p>View and manage your orders</p>
                    </div>
                </div>
            </div>
            <div class="balance-section">
                <h2>Asset Balances</h2>
                <div class="balance-table-container" id="balanceTableContainer">
                    <!-- Balance table will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Modal Forms -->
        <div id="modalOverlay" class="modal-overlay">
            <div id="withdrawalForm" class="modal">
                <div class="modal-header">
                    <h2>Withdraw Crypto</h2>
                    <button class="close-btn" onclick="hideForm('withdrawalForm')">×</button>
                </div>
                <form id="withdrawalFormSubmit" class="modal-form">
                    <div class="form-group">
                        <label for="assetName">Asset:</label>
                        <select id="assetName" required>
                            <option value="btc">BTC</option>
                            <option value="usdt">USDT</option>
                            <option value="eth">ETH</option>
                            <option value="trx">TRX</option>
                            <option value="doge">DOGE</option>
                            <option value="matic">MATIC</option>
                            <option value="shib">SHIB</option>
                            <option value="enj">ENJ</option>
                            <option value="sand">SAND</option>
                            <option value="hot">HOT</option>
                            <option value="sol">SOL</option>
                            <option value="ada">ADA</option>
                            <option value="bnb">BNB</option>
                            <option value="xlm">XLM</option>
                            <option value="xrp">XRP</option>
                            <option value="1inch">1INCH</option>
                            <option value="alice">ALICE</option>
                            <option value="zil">ZIL</option>
                            <option value="dai">DAI</option>
                            <option value="sushi">SUSHI</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount:</label>
                        <input type="number" id="amount" step="0.00000001" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Withdrawal Address:</label>
                        <input type="text" id="address" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="primary-btn">Withdraw</button>
                        <button type="button" onclick="hideForm('withdrawalForm')" class="secondary-btn">Cancel</button>
                    </div>
                </form>
                <div id="withdrawal-result" class="modal-result"></div>
            </div>

            <div id="orderForm" class="modal">
                <div class="modal-header">
                    <h2>Place Order</h2>
                    <button class="close-btn" onclick="hideForm('orderForm')">×</button>
                </div>
                <form id="orderFormSubmit" class="modal-form">
                    <div class="form-group">
                        <label for="orderType">Order Type:</label>
                        <select id="orderType" required>
                            <option value="LIMIT">Limit</option>
                            <option value="MARKET">Market</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="side">Side:</label>
                        <select id="side" required>
                            <option value="BUY">Buy</option>
                            <option value="SELL">Sell</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="instrument">Trading Pair:</label>
                        <input type="text" id="instrument" placeholder="e.g., BTC/INR" required>
                    </div>
                    <div class="form-group">
                        <label for="quantity">Quantity:</label>
                        <input type="number" id="quantity" step="0.00000001" required>
                    </div>
                    <div class="form-group" id="limitPriceGroup">
                        <label for="limitPrice">Limit Price:</label>
                        <input type="number" id="limitPrice" step="0.00000001">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="primary-btn">Place Order</button>
                        <button type="button" onclick="hideForm('orderForm')" class="secondary-btn">Cancel</button>
                    </div>
                </form>
                <div id="order-result" class="modal-result"></div>
            </div>

            <div id="cancelOrderForm" class="modal">
                <div class="modal-header">
                    <h2>Cancel Order</h2>
                    <button class="close-btn" onclick="hideForm('cancelOrderForm')">×</button>
                </div>
                <form id="cancelOrderFormSubmit" class="modal-form">
                    <div class="form-group">
                        <label for="orderId">Order ID:</label>
                        <input type="text" id="orderId" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="primary-btn">Cancel Order</button>
                        <button type="button" onclick="hideForm('cancelOrderForm')" class="secondary-btn">Close</button>
                    </div>
                </form>
                <div id="cancel-order-result" class="modal-result"></div>
            </div>

            <!-- Orders Section -->
            <div id="ordersSection" class="modal full-width">
                <div class="modal-header">
                    <h2>Order History</h2>
                    <button class="close-btn" onclick="hideForm('ordersSection')">×</button>
                </div>
                <div class="orders-toolbar">
                    <div class="filter-group">
                        <label for="statusFilter">Status:</label>
                        <select id="statusFilter" onchange="refreshOrders()">
                            <option value="all">All Orders</option>
                            <option value="open">Open</option>
                            <option value="fulfilled">Fulfilled</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sourceFilter">Source:</label>
                        <select id="sourceFilter" onchange="refreshOrders()">
                            <option value="all">All Sources</option>
                            <option value="local">This App</option>
                            <option value="external">External</option>
                        </select>
                    </div>
                    <button class="refresh-btn" onclick="refreshOrders()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div class="table-container">
                    <table id="ordersTable">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Trading Pair</th>
                                <th>Type</th>
                                <th>Side</th>
                                <th>Amount</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>



    <!-- Loading Spinner -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>
    <script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html> 